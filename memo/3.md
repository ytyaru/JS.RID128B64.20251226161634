# 却下したヘッダ仕様


# `-`でなく`_`を使う

　これまでの仕様を一部修正します。それに伴い実装とテストのコード修正をお願いします。

　これまでは出力するID文字列が`{head}-{body}`でした。この両者の間にある`-`をBase64URL以外の場合は`_`にしたいです。その理由はID文字列全体をダブルクリックにより範囲選択できるようにしたいからです。通常ブラウザ等でマウスのダブルクリックによる文字列の範囲選択は、`-`のある箇所で別の単語と認識されて途切れてしまいます。これをなるだけ回避したいです。

　但し、Base64URLは乱数部分に`-`が含まれる場合があります。なのに`{head}`と`{body}`の間は`_`だと、さも全体をダブルクリックでコピーできるかのように見えてしまいます。しかし乱数部分に`-`が含まれる場合においては、乱数部分の途中までしかコピーできなくなってしまい、それに気づかずペーストして不正な文字列となってしまいます。これを回避するために、Base64URLの場合など乱数部分に`-`が含まれる場合は、`{head}`と`{body}`の間も`-`にします。これにてダブルクリックで一括コピーできず、`{body}`内にも`-`が含まれているためダブルクリックコピーは不可能であることを間接的に知らせるようにしたいです。

　Base64URLの場合は、ダブルクリックによるコピーが`{body}`部分だけでもできない場合があります。なので本番環境ではHTTPS上のHTMLでコピーボタンを設置するなどの対応をすることになるでしょう。

　むしろ全パターンのID文字列をコピーする方法を、コピーボタンに統一したほうがわかりやすいです。HTTPS上のHTMLであればその通り。この仕様変更は無しにして、一括コピーの問題はUIで解決したほうがいいという考えもあります。

　ただ、もしこれがテキストエディタ上であれば`_`にしたほうが全体コピーできるはずです。

　よって、なるだけ多くの環境でコピーの手間を省くため、Base62以下の場合は`{head}`と`{body}`の間を`_`にしたいです。つまり`radix`が`63`,`64`,`256`,`F`の場合、他の値やフラグが何であろうと

　Base58



`head`と`body}`れを``



# IDヘッダ思想

　ID文字列はbitsやradix等の情報を持ったヘッドと実際値のボディの二箇所を持つ。

```
{head}[-_]{body}
```

　ヘッド部分があればボディ部分からデータを復元できる。すなわちバイナリ値や整数値に変換できる。

```
{head}[-_]{body}
```

　ヘッド部分は次のような構造。短縮記法もできる。

```
{type}ID{bits}R{radix}{flag}
```

　次のような感じになる。

```
RID128R64SUVP-uUKC2RIZ5Yi3a8erpCc6-g
```

　Base64URLだと`-`が含まれる。なのでヘッドとボディの間にも`-`を使うことに問題ない。

　ただ、`-`はブラウザでID文字列全体をダブルクリックしようとすると、`-`の部分で途切れてしまい、全体をコピーできない。

　そこで`-`でなく`_`にしたい。これなら全体をダブルクリックで範囲選択でき、一発でコピーできる。ただ、それはBase62以下であり`-`を使わない場合に限るべきだ。

　もしBase64URLなら`-`が含まれる場合があるため、それを意識させるためにもヘッドとボディの間は`-`にしておきたい。もしボディ部に`-`がない場合で、ヘッダとの間が`_`で全体コピーできるかのようにしてしまえば、ボディ部に`-`がある場合、ボディの途中の部分で範囲選択が途切れてしまっていることに気づけず、コピペミスを起こす可能性がある。なのでBase64URLのときはヘッダとボディの間を`-`にする。

　もしBase62など`-`が含まれないradixの場合、ヘッダとボディの間を`_`にしたい。これにてダブルクリックで全体をコピーできるはず。

```
```

